!function(){"use strict";var n,e={2769:function(n){function e(n,e){document.cookie=n+"="+e+"; path=/"}function i(n){if("edit"===n.data("state")){var e=$("form[name=engraving-form]"),i=(d="productEngraving",2===(a=("; "+document.cookie).split("; "+d+"=")).length?a.pop().split(";").shift():"");if(!(i=i?JSON.parse(i):null))return;e.find("input[type='text']").each(function(){var n=$(this).data("id")+"Item";$(this).val(i[n]).trigger("change")}),i.engravingProductUrl&&$("body").find(".product-engraving-default-img").attr("src",i.engravingProductUrl),$("body").find(".engraving-button").parents(".product-engraving-body").find("button").removeClass("selected"),e.find("button").each(function(){i.selectedFont&&$(this).data("font")===i.selectedFont&&$(this).toggleClass("selected")})}var d,a}function d(n){var e=n.val().length;e<=n.closest(".engraving-input-text-line").find(".max-count").text()&&n.closest(".engraving-input-text-line").find(".update-char-count").text(e)}function a(n,e){$.ajax({url:n,method:"GET",dataType:"json",success:function(n){var a,t,o,r,s,l,g,c=(a=n.renderedTemplate,t=$("<div>").append($.parseHTML(a)),o=t.find(".product-engraving-default-img.img-desktop"),r=t.find(".product-engraving-header"),s=t.find(".product-engraving-body"),l=t.find(".product-engraving-footer").children(),t.empty(),{header:r,body:s,footer:l,desktopImage:o}),v=$("#editAddProductEngraving");v.find(".modal-body").empty(),v.find(".desktop-left-section").html(c.desktopImage),v.find(".modal-header").html(c.header),v.find(".modal-body").html(c.body),v.find(".modal-footer").html(c.footer),v.find(".modal-header .close .sr-only").text(n.closeButtonText),v.find(".enter-message").text(n.enterDialogMessage),v.modal("show"),$("body").trigger("editAddProductEngraving:ready"),i(e),$(".engraving-field-line").focus(function(){$(this).on("input",function(){var n=$(this).val().replace(/[^a-zA-Z0-9\s]/g,"");$(this).val(n),d($(this))})}),""===document.forms["engraving-form"]["product-engraving-Line1"].value&&$(".add-engraving-link, .preview-engraving-link").addClass("disabled"),$(".engraving-field-Line1").on("input",function(){$(".add-engraving-link, .preview-engraving-link").removeClass("disabled"),$(this).val().length<1?($(".add-engraving-link, .preview-engraving-link").addClass("disabled"),$(".engraving-error-Line1").removeClass("d-none"),$(".engraving-field-line").addClass("error-msg-space"),$(this).addClass("error")):($(".engraving-error-Line1").addClass("d-none"),$(".engraving-field-line").removeClass("error-msg-space"),$(this).removeClass("error"))}),$(".product-engraving-header .close").on("click",function(){$("#editAddProductEngraving").addClass("close-modal-opened")}),$("#close-confirm-modal .close, #close-confirm-modal .close-confirmation-buttons .no").on("click",function(){$("#editAddProductEngraving").removeClass("close-modal-opened")}),$("#close-confirm-modal .close-confirmation-buttons .yes").on("click",function(){$("#editAddProductEngraving, #close-confirm-modal").modal("hide")}),$(".display-engraving-link .engraving-edit-link-text").hasClass("d-none")||$(".add-engraving-link").addClass("disabled"),$(".engraving-field-Line").on("input",function(){$(".add-engraving-link, .preview-engraving-link").removeClass("disabled")}),$(".display-engraving-link").hasClass("edit-enabled")&&((g=$(".engraving-field-line")).each(function(){d($(this))}),g.on("input",function(){$(".add-engraving-link").removeClass("disabled")}),g.each(function(){""!==$(this).val()?$(this).addClass("has-value"):$(this).removeClass("has-value")}))},error:function(){}})}function t(){var n=$("form[name=engraving-form]"),e="",i="",d=$(".product-engraving-dialog").find(".product-engraving-default-img").data("defaulturl"),a="upload/",t=-1!==d.indexOf(a)?d.split(a):[];t.length>0&&(e=t[0],e+=a,i=t[1]);var o,r="",s=n.find("button.selected").data("value"),l=n.find("button.selected").data("font"),g=$("body").find(".preview-engraving-link").data("productid"),c={};return n.find("input[type='text']").each(function(){var n=$(this).data("id")+"Item",e=$(this).data("position"),i=$(this).val();c[n]=i||"",i&&(r+="l_text:"+s+":"+i+e)}),o=e+r+i,c.engravingProductUrl=o,c.selectedFont=l,c.isEngravingAddedInProduct="",c.productId=g||"",c}n.exports={displayEngraving:function(){$("body").on("click",".add-engraving-container",function(n){if(!$(n.target).is(".engrave-delete-icon")){n.preventDefault();var e=$(".display-engraving-link").attr("href"),i=$(".display-engraving-link").data("productid");d={pid:i},e=(t=e)+(-1!==t.indexOf("?")?"&":"?")+Object.keys(d).map(function(n){return n+"="+encodeURIComponent(d[n])}).join("&"),0!==$("#editAddProductEngraving").length&&$("#editAddProductEngraving").remove(),$("body").append('\x3c!-- Modal --\x3e<div class="modal fade p-0" id="editAddProductEngraving" data-backdrop="static" tabindex="-1" role="dialog"><span class="enter-message sr-only" ></span><div class="modal-dialog product-engraving-dialog">\x3c!-- Modal content--\x3e<div class="modal-content"><div class="modal-header d-block"></div><div class="row"><div class="desktop-left-section d-none d-lg-block col-lg-6"></div><div class= "col-12 col-lg-6 content-section"><div class="modal-body"></div><div class="modal-footer d-block"></div></div></div></div></div></div>'),a(e,$(".display-engraving-link"))}var d,t})},previewEngraving:function(){$("body").on("click",".preview-engraving-link",function(n){n.preventDefault();var e=t().engravingProductUrl;e&&($(window).width()<=1023?$(".engraving-modal-mobile-preview").find(".product-engraving-preview-img").attr("src",e):$(".product-engraving-dialog").find(".product-engraving-default-img").attr("src",e))})},continueEditing:function(){$("body").on("click",".continue-edit",function(n){n.preventDefault();var e=t().engravingProductUrl;e&&$(".product-engraving-dialog").find(".product-engraving-default-img").attr("src",e)})},addEngraving:function(){$("body").on("click",".add-engraving-link",function(n){n.preventDefault();var i=t();e("productEngraving",JSON.stringify(i)),$(".display-engraving-link").data("state","edit"),$(".engraving-add-link-text").addClass("d-none"),$(".engraving-edit-link-text").removeClass("d-none"),$(".pdp-engraving-section").addClass("d-none"),$(".display-engraving-link").addClass("edit-enabled"),$(".engraving-link-section .success-msg").removeClass("d-none"),$(".engraving-link-section").addClass("engraving-added-section"),$(".add-engraving-container").addClass("engraving-added-success-msg"),$(".engraving-icon-separator").removeClass("d-none"),$(".success-engraving-note").removeClass("d-none"),$(".delete-engraving-link").removeClass("d-none"),$("#editAddProductEngraving").modal("toggle")})},deleteEngraving:function(){$("body").on("click",".delete-engraving-link",function(n){n.preventDefault(),e("productEngraving",null),$(".display-engraving-link").data("state","new"),$(".engraving-add-link-text").removeClass("d-none"),$(".engraving-edit-link-text").addClass("d-none"),$(".display-engraving-link").removeClass("edit-enabled"),$(".engraving-link-section .success-msg").addClass("d-none"),$(".engraving-link-section").removeClass("engraving-added-section"),$(".add-engraving-container").removeClass("engraving-added-success-msg"),$(".delete-engraving-link").addClass("d-none"),$(".engraving-icon-separator").addClass("d-none"),$(".pdp-engraving-section").removeClass("d-none"),$(".success-engraving-note").addClass("d-none")})},engravingButtonSelect:function(){$("body").on("click",".engraving-button",function(){$(this).parents(".product-engraving-body").find("button").removeClass("selected"),$(this).addClass("selected"),$(".engraving-field-Line1").trigger("input")})}}},5047:function(n){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e(n)}n.exports=function(n){"function"==typeof n?n():"object"===e(n)&&Object.keys(n).forEach(function(e){"function"==typeof n[e]&&n[e]()})}}},i={};function d(n){var a=i[n];if(void 0!==a)return a.exports;var t=i[n]={exports:{}};return e[n](t,t.exports,d),t.exports}n=d(5047),$(document).ready(function(){n(d(2769))})}();